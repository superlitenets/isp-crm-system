isp_crm_php  | [29-Jan-2026 11:52:58] NOTICE: ready to handle connections
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:53:46 +0300 "GET /index.php" 302
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:53:46 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:53:48 +0300 "POST /index.php" 302
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:53:48 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:53:53 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:53:55 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:53:59 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:00 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:01 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:04 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:00 +0300 "GET /api/smartolt-onus.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:06 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:09 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:11 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:13 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:15 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:24 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:26 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:27 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:30 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:33 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:35 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:38 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:40 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:42 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:44 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:46 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:48 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:48 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:53 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:54:54 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:55:01 +0300 "GET /cron.php" 403
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:55:01 +0300 "GET /cron.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:11:59:00 +0300 "GET /api/smartolt-onus.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:01 +0300 "GET /cron.php" 403
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:01 +0300 "GET /cron.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:16 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:16 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:41 +0300 "GET /index.php" 302
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:41 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:54 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:54 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:00:54 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:01:00 +0300 "POST /index.php" 302
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:01:00 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:02:27 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:02:27 +0300 "GET /api/whatsapp-chat.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:02:31 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:03:30 +0300 "GET /index.php" 302
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:03:30 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:04:00 +0300 "POST /index.php" 302
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:04:01 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:04:19 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:04:27 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:04:28 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:04:29 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:04:30 +0300 "GET /api/smartolt-onus.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:04:58 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:01 +0300 "GET /cron.php" 403
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:02 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:04 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:06 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:08 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:10 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:10 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:01 +0300 "GET /cron.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:15 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:15 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:20 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:21 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:26 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:26 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:31 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:31 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:36 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:36 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:41 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:42 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:47 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:47 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:52 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:52 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:57 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:05:57 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:02 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:02 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:07 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:08 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:13 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:13 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:18 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:18 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:06:23 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:07:00 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:07:04 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:07:06 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:07:08 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:07:10 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:07:51 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:07:54 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:09:30 +0300 "GET /api/smartolt-onus.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:10:01 +0300 "GET /cron.php" 403
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:10:01 +0300 "GET /cron.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:10:43 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:10:43 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:11 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:11 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:16 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:16 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:16 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:17 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:22 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:22 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:22 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:22 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:11:22 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:03 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:06 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:18 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:21 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:23 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:25 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:27 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:28 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:33 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:33 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:38 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:38 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:43 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:43 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:48 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:49 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:54 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:54 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:59 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:12:59 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:04 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:19 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:22 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:24 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:28 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:31 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:41 +0300 "POST /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:44 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:47 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:49 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:51 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:51 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:56 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:13:56 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:02 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:02 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:07 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:07 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:13 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:13 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:18 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:18 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:24 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:24 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:29 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:14:30 +0300 "GET /api/smartolt-onus.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:15:02 +0300 "GET /cron.php" 403
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:15:02 +0300 "GET /cron.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:15:59 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:16:02 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:16:09 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:16:13 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:16:13 +0300 "GET /index.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:20:01 +0300 "GET /cron.php" 403
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:20:00 +0300 "GET /api/smartolt-onus.php" 200
isp_crm_php  | 172.18.0.9 -  29/Jan/2026:12:20:01 +0300 "GET /cron.php" 200
^C
root@superlitecrm:~/isp#
root@superlitecrm:~/isp#
root@superlitecrm:~/isp# docker compose logs -f whatsapp
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | Initializing WhatsApp client...
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | Logout error: Error: EBUSY: resource busy or locked, rmdir '/app/.wwebjs_auth'
isp_crm_whatsapp  |     at rmdirSync (node:fs:1214:11)
isp_crm_whatsapp  |     at _rmdirSync (node:internal/fs/rimraf:237:5)
isp_crm_whatsapp  |     at rimrafSync (node:internal/fs/rimraf:195:7)
isp_crm_whatsapp  |     at Object.rmSync (node:fs:1263:10)
isp_crm_whatsapp  |     at /app/index.js:417:16 {
isp_crm_whatsapp  |   errno: -16,
isp_crm_whatsapp  |   code: 'EBUSY',
isp_crm_whatsapp  |   syscall: 'rmdir',
isp_crm_whatsapp  |   path: '/app/.wwebjs_auth'
isp_crm_whatsapp  | }
isp_crm_whatsapp  | Initializing WhatsApp client...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | Initializing WhatsApp client...
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | Initializing WhatsApp client...
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WARNING: Authenticated but ready event never fired after 90s. Reinitializing...
isp_crm_whatsapp  | Cleared stale session directory
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Page.js:563
isp_crm_whatsapp  |             throw new Error(`Failed to add page binding with name ${name}: window['${name}'] already exists!`);
isp_crm_whatsapp  |                   ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | Error: Failed to add page binding with name onQRChangedEvent: window['onQRChangedEvent'] already exists!
isp_crm_whatsapp  |     at CdpPage.exposeFunction (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Page.js:563:19)
isp_crm_whatsapp  |     at exposeFunctionIfAbsent (/app/node_modules/whatsapp-web.js/src/util/Puppeteer.js:20:16)
isp_crm_whatsapp  |     at async Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:175:17)
isp_crm_whatsapp  |     at async Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:373:9)
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | Initializing WhatsApp client...
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | WhatsApp client is ready!
isp_crm_whatsapp  | WhatsApp client is ready!
isp_crm_whatsapp  | WhatsApp client is ready!
isp_crm_whatsapp  | WhatsApp client is ready!
isp_crm_whatsapp  | Applied sendSeen patch for group messages
isp_crm_whatsapp  | Applied sendSeen patch for group messages
isp_crm_whatsapp  | Applied sendSeen patch for group messages
isp_crm_whatsapp  | Applied sendSeen patch for group messages
isp_crm_whatsapp  | Initializing WhatsApp client...
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:107
isp_crm_whatsapp  |                 throw new Error(message(this));
isp_crm_whatsapp  |                       ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | Error: Attempted to use detached Frame 'E05F58FA1AFBF30A3497C82090A8F21C'.
isp_crm_whatsapp  |     at CdpFrame.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:107:23)
isp_crm_whatsapp  |     at CdpPage.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:826:43)
isp_crm_whatsapp  |     at Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:106:38)
isp_crm_whatsapp  |     at async /app/node_modules/whatsapp-web.js/src/Client.js:383:13
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Initializing WhatsApp client...
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82
isp_crm_whatsapp  |             this._reject(callback, new Errors_js_1.TargetCloseError('Target closed'));
isp_crm_whatsapp  |                                    ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | TargetCloseError: Protocol error (Runtime.callFunctionOn): Target closed
isp_crm_whatsapp  |     at CallbackRegistry.clear (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82:36)
isp_crm_whatsapp  |     at CdpCDPSession.onClosed (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:115:25)
isp_crm_whatsapp  |     at Connection.onMessage (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:149:25)
isp_crm_whatsapp  |     at WebSocket.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/node/NodeWebSocketTransport.js:43:32)
isp_crm_whatsapp  |     at callListener (/app/node_modules/ws/lib/event-target.js:290:14)
isp_crm_whatsapp  |     at WebSocket.onMessage (/app/node_modules/ws/lib/event-target.js:209:9)
isp_crm_whatsapp  |     at WebSocket.emit (node:events:524:28)
isp_crm_whatsapp  |     at Receiver.receiverOnMessage (/app/node_modules/ws/lib/websocket.js:1225:20)
isp_crm_whatsapp  |     at Receiver.emit (node:events:524:28)
isp_crm_whatsapp  |     at Immediate.<anonymous> (/app/node_modules/ws/lib/receiver.js:601:16)
isp_crm_whatsapp  |     at process.processImmediate (node:internal/timers:483:21) {
isp_crm_whatsapp  |   cause: ProtocolError
isp_crm_whatsapp  |       at <instance_members_initializer> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103:14)
isp_crm_whatsapp  |       at new Callback (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:107:16)
isp_crm_whatsapp  |       at CallbackRegistry.create (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:25:26)
isp_crm_whatsapp  |       at Connection._rawSend (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:108:26)
isp_crm_whatsapp  |       at CdpCDPSession.send (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:74:33)
isp_crm_whatsapp  |       at #evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:363:50)
isp_crm_whatsapp  |       at ExecutionContext.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:277:36)
isp_crm_whatsapp  |       at IsolatedWorld.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:100:30)
isp_crm_whatsapp  |       at CdpFrame.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:362:43)
isp_crm_whatsapp  |       at CdpFrame.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:109:27)
isp_crm_whatsapp  |       at CdpPage.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:826:43)
isp_crm_whatsapp  |       at Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:124:55)
isp_crm_whatsapp  |       at async Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:373:9)
isp_crm_whatsapp  | }
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | Initializing WhatsApp client...
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WhatsApp authenticated
isp_crm_whatsapp  | WARNING: Authenticated but ready event never fired after 90s. Reinitializing...
isp_crm_whatsapp  | Cleared stale session directory
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserLauncher.js:174
isp_crm_whatsapp  |                 throw new Error(`The browser is already running for ${launchArgs.userDataDir}. Use a different \`userDataDir\` or stop the running browser first.`);
isp_crm_whatsapp  |                       ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | Error: The browser is already running for /app/.wwebjs_auth/session. Use a different `userDataDir` or stop the running browser first.
isp_crm_whatsapp  |     at ChromeLauncher.launch (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/node/BrowserLauncher.js:174:23)
isp_crm_whatsapp  |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
isp_crm_whatsapp  |     at async Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:331:23)
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | QR Code received
^C
root@superlitecrm:~/isp#
root@superlitecrm:~/isp#
root@superlitecrm:~/isp# cd /root/isp
# Pull latest code (or copy the updated whatsapp-service/index.js)
git pull
# Rebuild and restart just the WhatsApp container
docker compose build whatsapp
docker compose up -d whatsapp
# Watch the logs
docker compose logs -f whatsapp
remote: Enumerating objects: 7, done.
remote: Counting objects: 100% (7/7), done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 4 (delta 3), reused 4 (delta 3), pack-reused 0 (from 0)
Unpacking objects: 100% (4/4), 1.73 KiB | 354.00 KiB/s, done.
From https://github.com/superlitenets/isp-crm-system
   8bb844f..008a16e  main       -> origin/main
Updating 8bb844f..008a16e
Fast-forward
 whatsapp-service/index.js | 141 ++++++++++++++++++++++++++++++----------------
 1 file changed, 93 insertions(+), 48 deletions(-)
 [+] Building 0.0s (0/1)
 [+] Building 0.2s (1/1)
 [+] Building 0.2s (1/2)
 [+] Building 0.4s (2/3)
 [+] Building 0.6s (2/3)
 [+] Building 0.7s (2/3)
 [+] Building 0.9s (2/3)
 [+] Building 1.0s (2/3)
 [+] Building 1.2s (2/3)
 [+] Building 1.3s (2/3)
 [+] Building 1.5s (2/3)
 [+] Building 1.6s (2/3)
 [+] Building 1.8s (2/3)
 [+] Building 1.9s (2/3)
 [+] Building 2.0s (3/3)
 [+] Building 2.1s (11/12)
 [+] Building 2.3s (11/12)
 [+] Building 2.4s (11/12)
 [+] Building 2.6s (11/12)
 [+] Building 2.7s (12/12)
 [+] Building 2.9s (12/13)
 [+] Building 2.9s (12/13)
 [+] Building 3.1s (12/13)
 [+] Building 3.3s (13/13)
 [+] Building 3.4s (13/14)
 [+] Building 3.4s (14/14) FINISHED
 => [internal] load local bake definitions                                 0.0s
 => [internal] load local bake definitions                                 0.0s
 => => reading from stdin 504B                                             0.0s
 => [internal] load build definition from Dockerfile                       0.1s
 => => transferring dockerfile: 460B                                       0.0s
 => [internal] load metadata for docker.io/library/node:20-slim            1.7s
 => [internal] load .dockerignore                                          0.0s
 => => transferring context: 2B                                            0.0s
 => [1/7] FROM docker.io/library/node:20-slim@sha256:6c51af7dc83f4708aaac  0.1s
 => => resolve docker.io/library/node:20-slim@sha256:6c51af7dc83f4708aaac  0.0s
 => [internal] load build context                                          0.0s
 => => transferring context: 25.90kB                                       0.0s
 => CACHED [2/7] RUN apt-get update && apt-get install -y     chromium     0.0s
 => CACHED [3/7] WORKDIR /app                                              0.0s
 => CACHED [4/7] COPY package*.json ./                                     0.0s
 => CACHED [5/7] RUN npm install --production                              0.0s
 => [6/7] COPY index.js ./                                                 0.1s
 => [7/7] RUN mkdir -p .wwebjs_auth .api_secret_dir                        0.6s
 => exporting to image                                                     0.4s
 => => exporting layers                                                    0.2s
 => => exporting manifest sha256:1486f06fd052738ec875fb5fe077c202b9251eb3  0.0s
 => => exporting config sha256:ab424929bbc031d310ef03a346816cece7c4b71127  0.0s
 => => exporting attestation manifest sha256:43d8e30a299499fed6404823ee72  0.0s
 => => exporting manifest list sha256:c71015b7b793eeee909af9078199b77d2ce  0.0s
 => => naming to docker.io/library/isp-whatsapp:latest                     0.0s
 => => unpacking to docker.io/library/isp-whatsapp:latest                  0.1s
 => resolving provenance for metadata file                                 0.0s
 [+] build 1/1
WARN[0000] Found orphan containers ([isp_crm_license_server]) for this project.
If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up.
 [+] up 1/1
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | Auto-init error: Protocol error (Runtime.callFunctionOn): Target closed
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82
isp_crm_whatsapp  |             this._reject(callback, new Errors_js_1.TargetCloseError('Target closed'));
isp_crm_whatsapp  |                                    ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | TargetCloseError: Protocol error (Runtime.callFunctionOn): Target closed
isp_crm_whatsapp  |     at CallbackRegistry.clear (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82:36)
isp_crm_whatsapp  |     at CdpCDPSession.onClosed (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:115:25)
isp_crm_whatsapp  |     at Connection.onMessage (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:149:25)
isp_crm_whatsapp  |     at WebSocket.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/node/NodeWebSocketTransport.js:43:32)
isp_crm_whatsapp  |     at callListener (/app/node_modules/ws/lib/event-target.js:290:14)
isp_crm_whatsapp  |     at WebSocket.onMessage (/app/node_modules/ws/lib/event-target.js:209:9)
isp_crm_whatsapp  |     at WebSocket.emit (node:events:524:28)
isp_crm_whatsapp  |     at Receiver.receiverOnMessage (/app/node_modules/ws/lib/websocket.js:1225:20)
isp_crm_whatsapp  |     at Receiver.emit (node:events:524:28)
isp_crm_whatsapp  |     at Immediate.<anonymous> (/app/node_modules/ws/lib/receiver.js:601:16)
isp_crm_whatsapp  |     at process.processImmediate (node:internal/timers:483:21) {
isp_crm_whatsapp  |   cause: ProtocolError
isp_crm_whatsapp  |       at <instance_members_initializer> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103:14)
isp_crm_whatsapp  |       at new Callback (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:107:16)
isp_crm_whatsapp  |       at CallbackRegistry.create (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:25:26)
isp_crm_whatsapp  |       at Connection._rawSend (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:108:26)
isp_crm_whatsapp  |       at CdpCDPSession.send (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:74:33)
isp_crm_whatsapp  |       at #evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:363:50)
isp_crm_whatsapp  |       at ExecutionContext.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:277:36)
isp_crm_whatsapp  |       at IsolatedWorld.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:100:30)
isp_crm_whatsapp  |       at CdpFrame.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:362:43)
isp_crm_whatsapp  |       at CdpFrame.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:109:27)
isp_crm_whatsapp  |       at CdpPage.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:826:43)
isp_crm_whatsapp  |       at Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:124:55)
isp_crm_whatsapp  |       at async Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:373:9)
isp_crm_whatsapp  | }
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp exited with code 1 (restarting)                                isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | Auto-init error: The browser is already running for /app/.wwebjs_auth/session. Use a different `userDataDir` or stop the running browser first.
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82
isp_crm_whatsapp  |             this._reject(callback, new Errors_js_1.TargetCloseError('Target closed'));
isp_crm_whatsapp  |                                    ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | TargetCloseError: Protocol error (Runtime.evaluate): Target
closed
isp_crm_whatsapp  |     at CallbackRegistry.clear (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82:36)
isp_crm_whatsapp  |     at CdpCDPSession.onClosed (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:115:25)
isp_crm_whatsapp  |     at Connection.onMessage (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:149:25)
isp_crm_whatsapp  |     at WebSocket.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/node/NodeWebSocketTransport.js:43:32)
isp_crm_whatsapp  |     at callListener (/app/node_modules/ws/lib/event-target.js:290:14)
isp_crm_whatsapp  |     at WebSocket.onMessage (/app/node_modules/ws/lib/event-target.js:209:9)
isp_crm_whatsapp  |     at WebSocket.emit (node:events:524:28)
isp_crm_whatsapp  |     at Receiver.receiverOnMessage (/app/node_modules/ws/lib/websocket.js:1225:20)
isp_crm_whatsapp  |     at Receiver.emit (node:events:524:28)
isp_crm_whatsapp  |     at Immediate.<anonymous> (/app/node_modules/ws/lib/receiver.js:601:16)
isp_crm_whatsapp  |     at process.processImmediate (node:internal/timers:483:21) {
isp_crm_whatsapp  |   cause: ProtocolError
isp_crm_whatsapp  |       at <instance_members_initializer> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103:14)
isp_crm_whatsapp  |       at new Callback (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:107:16)
isp_crm_whatsapp  |       at CallbackRegistry.create (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:25:26)
isp_crm_whatsapp  |       at Connection._rawSend (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:108:26)
isp_crm_whatsapp  |       at CdpCDPSession.send (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:74:33)
isp_crm_whatsapp  |       at #evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:341:18)
isp_crm_whatsapp  |       at ExecutionContext.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:277:36)
isp_crm_whatsapp  |       at IsolatedWorld.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:100:30)
isp_crm_whatsapp  |       at CdpFrame.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:362:43)
isp_crm_whatsapp  |       at CdpFrame.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:109:27)
isp_crm_whatsapp  |       at CdpPage.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:826:43)
isp_crm_whatsapp  |       at Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:106:38)
isp_crm_whatsapp  |       at Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:373:20)
isp_crm_whatsapp  | }
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp exited with code 1 (restarting)                                isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103
isp_crm_whatsapp  |     #error = new Errors_js_1.ProtocolError();
isp_crm_whatsapp  |              ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | ProtocolError: Runtime.callFunctionOn timed out. Increase the 'protocolTimeout' setting in launch/connect calls for a higher timeout if needed.
isp_crm_whatsapp  |     at <instance_members_initializer> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103:14)
isp_crm_whatsapp  |     at new Callback (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:107:16)
isp_crm_whatsapp  |     at CallbackRegistry.create (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:25:26)
isp_crm_whatsapp  |     at Connection._rawSend (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:108:26)
isp_crm_whatsapp  |     at CdpCDPSession.send (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:74:33)
isp_crm_whatsapp  |     at #evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:363:50)
isp_crm_whatsapp  |     at ExecutionContext.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:277:36)
isp_crm_whatsapp  |     at IsolatedWorld.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:100:30)
isp_crm_whatsapp  |     at CdpFrame.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:362:43)
isp_crm_whatsapp  |     at CdpFrame.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:109:27)
isp_crm_whatsapp  |     at CdpPage.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:826:43)
isp_crm_whatsapp  |     at Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:124:55)
isp_crm_whatsapp  |     at async Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:373:9)
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp exited with code 1 (restarting)                                isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | Auto-init error: Failed to add page binding with name onQRChangedEvent: window['onQRChangedEvent'] already exists!
isp_crm_whatsapp  | QR Code received
^C
root@superlitecrm:~/isp#
root@superlitecrm:~/isp#
root@superlitecrm:~/isp# git pull
remote: Enumerating objects: 6, done.
remote: Counting objects: 100% (6/6), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 4 (delta 2), reused 4 (delta 2), pack-reused 0 (from 0)
Unpacking objects: 100% (4/4), 4.93 KiB | 1010.00 KiB/s, done.
From https://github.com/superlitenets/isp-crm-system
   008a16e..2276a02  main       -> origin/main
Updating 008a16e..2276a02
Fast-forward
 ...LTS-GNU-Linux-6-8-0-90-generi_1769679728489.txt | 593 +++++++++++++++++++++
 1 file changed, 593 insertions(+)
 create mode 100644 attached_assets/Pasted-Welcome-to-Ubuntu-24-04-3-LTS-GNU-Linux-6-8-0-90-generi_1769679728489.txt
root@superlitecrm:~/isp# # Stop the container completely
docker compose stop whatsapp
# Remove the corrupted session volume/data
docker compose run --rm whatsapp rm -rf /app/.wwebjs_auth
# Start fresh
docker compose up -d whatsapp
# Watch the logs - you should see QR codes
docker compose logs -f whatsapp
 [+] stop 1/1
 âœ” Container isp_crm_whatsapp Stopped                                     10.4s WARN[0000] Found orphan containers ([isp_crm_license_server]) for this project.
If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up.
Container isp-whatsapp-run-ff5811f95388 Creating
Container isp-whatsapp-run-ff5811f95388 Created
rm: cannot remove '/app/.wwebjs_auth': Device or resource busy
WARN[0000] Found orphan containers ([isp_crm_license_server]) for this project.
If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up.
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | Auto-init error: Protocol error (Runtime.callFunctionOn): Target closed
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82
isp_crm_whatsapp  |             this._reject(callback, new Errors_js_1.TargetCloseError('Target closed'));
isp_crm_whatsapp  |                                    ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | TargetCloseError: Protocol error (Runtime.callFunctionOn): Target closed
isp_crm_whatsapp  |     at CallbackRegistry.clear (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82:36)
isp_crm_whatsapp  |     at CdpCDPSession.onClosed (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:115:25)
isp_crm_whatsapp  |     at Connection.onMessage (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:149:25)
isp_crm_whatsapp  |     at WebSocket.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/node/NodeWebSocketTransport.js:43:32)
isp_crm_whatsapp  |     at callListener (/app/node_modules/ws/lib/event-target.js:290:14)
isp_crm_whatsapp  |     at WebSocket.onMessage (/app/node_modules/ws/lib/event-target.js:209:9)
isp_crm_whatsapp  |     at WebSocket.emit (node:events:524:28)
isp_crm_whatsapp  |     at Receiver.receiverOnMessage (/app/node_modules/ws/lib/websocket.js:1225:20)
isp_crm_whatsapp  |     at Receiver.emit (node:events:524:28)
isp_crm_whatsapp  |     at Immediate.<anonymous> (/app/node_modules/ws/lib/receiver.js:601:16)
isp_crm_whatsapp  |     at process.processImmediate (node:internal/timers:483:21) {
isp_crm_whatsapp  |   cause: ProtocolError
isp_crm_whatsapp  |       at <instance_members_initializer> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103:14)
isp_crm_whatsapp  |       at new Callback (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:107:16)
isp_crm_whatsapp  |       at CallbackRegistry.create (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:25:26)
isp_crm_whatsapp  |       at Connection._rawSend (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:108:26)
isp_crm_whatsapp  |       at CdpCDPSession.send (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:74:33)
isp_crm_whatsapp  |       at #evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:363:50)
isp_crm_whatsapp  |       at ExecutionContext.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:277:36)
isp_crm_whatsapp  |       at IsolatedWorld.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:100:30)
isp_crm_whatsapp  |       at CdpFrame.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:362:43)
isp_crm_whatsapp  |       at CdpFrame.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:109:27)
isp_crm_whatsapp  |       at CdpPage.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:826:43)
isp_crm_whatsapp  |       at Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:124:55)
isp_crm_whatsapp  |       at async Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:373:9)
isp_crm_whatsapp  | }
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | Auto-init error: The browser is already running for /app/.wwebjs_auth/session. Use a different `userDataDir` or stop the running browser first.
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82
isp_crm_whatsapp  |             this._reject(callback, new Errors_js_1.TargetCloseError('Target closed'));
isp_crm_whatsapp  |                                    ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | TargetCloseError: Protocol error (Runtime.evaluate): Target
closed
isp_crm_whatsapp  |     at CallbackRegistry.clear (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:82:36)
isp_crm_whatsapp  |     at CdpCDPSession.onClosed (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:115:25)
isp_crm_whatsapp  |     at Connection.onMessage (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:149:25)
isp_crm_whatsapp  |     at WebSocket.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/node/NodeWebSocketTransport.js:43:32)
isp_crm_whatsapp  |     at callListener (/app/node_modules/ws/lib/event-target.js:290:14)
isp_crm_whatsapp  |     at WebSocket.onMessage (/app/node_modules/ws/lib/event-target.js:209:9)
isp_crm_whatsapp  |     at WebSocket.emit (node:events:524:28)
isp_crm_whatsapp  |     at Receiver.receiverOnMessage (/app/node_modules/ws/lib/websocket.js:1225:20)
isp_crm_whatsapp  |     at Receiver.emit (node:events:524:28)
isp_crm_whatsapp  |     at Immediate.<anonymous> (/app/node_modules/ws/lib/receiver.js:601:16)
isp_crm_whatsapp  |     at process.processImmediate (node:internal/timers:483:21) {
isp_crm_whatsapp  |   cause: ProtocolError
isp_crm_whatsapp  |       at <instance_members_initializer> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103:14)
isp_crm_whatsapp  |       at new Callback (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:107:16)
isp_crm_whatsapp  |       at CallbackRegistry.create (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:25:26)
isp_crm_whatsapp  |       at Connection._rawSend (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:108:26)
isp_crm_whatsapp  |       at CdpCDPSession.send (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:74:33)
isp_crm_whatsapp  |       at #evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:341:18)
isp_crm_whatsapp  |       at ExecutionContext.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:277:36)
isp_crm_whatsapp  |       at IsolatedWorld.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:100:30)
isp_crm_whatsapp  |       at CdpFrame.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:362:43)
isp_crm_whatsapp  |       at CdpFrame.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:109:27)
isp_crm_whatsapp  |       at CdpPage.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:826:43)
isp_crm_whatsapp  |       at Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:106:38)
isp_crm_whatsapp  |       at Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:373:20)
isp_crm_whatsapp  | }
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | /app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103
isp_crm_whatsapp  |     #error = new Errors_js_1.ProtocolError();
isp_crm_whatsapp  |              ^
isp_crm_whatsapp  |
isp_crm_whatsapp  | ProtocolError: Runtime.callFunctionOn timed out. Increase the 'protocolTimeout' setting in launch/connect calls for a higher timeout if needed.
isp_crm_whatsapp  |     at <instance_members_initializer> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:103:14)
isp_crm_whatsapp  |     at new Callback (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:107:16)
isp_crm_whatsapp  |     at CallbackRegistry.create (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/common/CallbackRegistry.js:25:26)
isp_crm_whatsapp  |     at Connection._rawSend (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/Connection.js:108:26)
isp_crm_whatsapp  |     at CdpCDPSession.send (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/CdpSession.js:74:33)
isp_crm_whatsapp  |     at #evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:363:50)
isp_crm_whatsapp  |     at ExecutionContext.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/ExecutionContext.js:277:36)
isp_crm_whatsapp  |     at IsolatedWorld.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/cdp/IsolatedWorld.js:100:30)
isp_crm_whatsapp  |     at CdpFrame.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Frame.js:362:43)
isp_crm_whatsapp  |     at CdpFrame.<anonymous> (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/util/decorators.js:109:27)
isp_crm_whatsapp  |     at CdpPage.evaluate (/app/node_modules/puppeteer-core/lib/cjs/puppeteer/api/Page.js:826:43)
isp_crm_whatsapp  |     at Client.inject (/app/node_modules/whatsapp-web.js/src/Client.js:124:55)
isp_crm_whatsapp  |     at async Client.initialize (/app/node_modules/whatsapp-web.js/src/Client.js:373:9)
isp_crm_whatsapp  |
isp_crm_whatsapp  | Node.js v20.20.0
isp_crm_whatsapp  | Removed stale lock file: /app/.wwebjs_auth/session/SingletonSocket
isp_crm_whatsapp  | Removed nested lock file: /app/.wwebjs_auth/session/SingletonLock
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium
isp_crm_whatsapp  | Auto-init error: Failed to add page binding with name onQRChangedEvent: window['onQRChangedEvent'] already exists!
isp_crm_whatsapp  | QR Code received
isp_crm_whatsapp  | WhatsApp service running on 0.0.0.0:3001
isp_crm_whatsapp  | API Secret: Configured
isp_crm_whatsapp  | Session found, auto-initializing...
isp_crm_whatsapp  | Using Chromium at: /usr/bin/chromium