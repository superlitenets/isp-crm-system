Platform-Wide Database Impact

Database Issues Affect All Components (CRM & OMS)

The current database state impacts all system modules, including:

OMS (OLT communication, ONU authorization, SNMP polling)

CRM (customers, services, billing, tickets)

Missing or inconsistent tables are causing:

Failed provisioning workflows

Incorrect ONU and service states

Data integrity issues across modules

Root Cause

Database schema is not initialized consistently across deployments.

No enforced migration process during system startup.

Required Fix

Add a single authoritative database migration set to the project.

On docker compose up, the system must:

Initialize the database

Run all migrations automatically

Validate required tables for both CRM and OMS

System startup should fail gracefully if migrations do not complete successfully.

2. OLT Communication & Provisioning

OMS Not Writing Configurations to OLT

Provisioning actions initiated from OMS are not being executed on the OLT.

Likely caused by broken CLI execution logic and/or missing database dependencies.

Expected behavior: OMS must reliably generate and push vendor-specific CLI commands.

ONU Authorization Not Working

Newly discovered ONUs remain in pending authorization state.

Authorization actions are not synchronized with the OLT.

Expected behavior: Authorization should update OLT configuration and database state atomically.

3. SNMP & Monitoring

SNMP Not Displaying OLT Information

OLT and ONU monitoring data is missing from the UI.

Possible causes:

Missing SNMP configuration records in the database

Incorrect OID mappings

Polling services failing due to schema issues

Expected behavior: SNMP polling should be database-driven and consistent.

4. OMS Configuration Cleanup

Remove Service Templates from OMS

OMS-level service templates overlap with CRM services and OLT profiles.

Recommendation: rely on OLT profiles and CRM service definitions instead.

Move CLI Generation to Settings

Centralize all vendor CLI templates and logic under System Settings.

Reduces duplication and configuration drift.

5. ONU Provisioning & Configuration

Remove Manual OMCI Configuration per ONU

Manual OMCI settings at ONU level should be removed.

OMCI should be applied automatically based on assigned profiles.

TR-069 for ONU Wi-Fi & WAN Configuration

All customer-facing ONU configurations must be managed via TR-069 (ACS):

WAN (PPPoE, DHCP, Bridge)

Wi-Fi SSID and security

Remote diagnostics and CPE management

OMS/CRM should push configuration intents to the ACS, not directly to the ONU.

6. Target Architecture (SmartOLT-Aligned)

The platform should operate as a single, database-driven system with:

One shared schema for CRM and OMS

Automated migrations on deployment

Centralized provisioning logic

SNMP for monitoring

TR-069 for CPE (ONU) configuration

Clear separation of concerns:

CRM → Customers, services, billing

OMS → Network, OLT, ONU lifecycle

ACS → Device configuration and management