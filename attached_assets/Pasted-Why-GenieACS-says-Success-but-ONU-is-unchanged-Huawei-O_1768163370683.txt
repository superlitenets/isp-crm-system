Why GenieACS says “Success” but ONU is unchanged

Huawei ONUs do not behave like TP-Link or ZTE.
They have a dual-layer config engine:

Layer	Description
TR-069 layer	Accepts ACS commands
GPON OMCI layer	Enforces what is actually allowed

If OMCI disallows something, Huawei firmware returns “Success” to ACS but does not apply the change.

This is normal Huawei behavior.

2️⃣ The real problem in your logs

This line is the killer:

Add: InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection


Huawei ONUs DO NOT allow ACS to create WAN objects.

They must already exist from:

• OLT OMCI
• Or factory profile

ACS is only allowed to edit existing instances.

If instance does not exist → ACS says success → ONU ignores.

3️⃣ How Huawei WAN provisioning really works

Huawei ONUs have this flow:

OLT → OMCI → Create WAN port
ACS → TR-069 → Edit WAN


You are doing:

ACS → Trying to create WAN → BLOCKED

4️⃣ What MUST exist before GenieACS can work

Run this on the OLT:

display ont wan-info 0 1 0


You must see something like:

WAN Name: Internet_PPPoE
Mode: Route
VLAN: 902
Type: PPPoE


If that does NOT exist → GenieACS cannot write anything.

5️⃣ Correct Huawei provisioning model
Step 1 – Create WAN on OLT (one time per ONU)

Example:

ont wan-config 0 1 0 1 \
  profile-id 1 \
  service internet \
  vlan 902 \
  pppoe enable


(Exact syntax depends on MA5683T vs MA5800)

This creates:

InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.1

Step 2 – GenieACS should ONLY edit

Your GenieACS must use:

InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.1.Username
InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANPPPConnection.1.Password
InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.NATEnabled
InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.X_HW_VLAN


NOT:

Add: WANPPPConnection
Add: policy_route

6️⃣ Huawei blocks these via TR-069

These will always fail silently on Huawei ONUs:

❌ Add WAN
❌ Delete WAN
❌ Add policy routes
❌ Change WAN type (bridge ↔ route)
❌ Create VLAN

They must come from OMCI.

7️⃣ How to verify what ACS can actually see

In GenieACS UI → Device → Parameters → search:

WANPPPConnection


If you do NOT see .1. → OLT never created it.

8️⃣ Why SmartOLT works and GenieACS fails

SmartOLT talks to:

OLT CLI + OMCI


GenieACS talks to:

ONU TR-069 only


Huawei ONUs trust OMCI, not ACS.

9️⃣ Your log decoded
GenieACS	Huawei ONU
Set PPPoE VLAN	❌ Blocked
Add WANPPPConnection	❌ Ignored
Set Username	❌ No WAN to apply
Set NAT	❌ No WAN to apply
Refresh WAN	Reads empty

So GenieACS is working — but Huawei is rejecting the model.