00259E-HG8546M-485754434654DD9B: Connection request error: Unexpected status code 401  still not sorted

Good ‚Äî now we have the exact error:

00259E-HG8546M-485754434654DD9B:
Connection request error: Unexpected status code 401


This is NOT the ONU failing to authenticate to ACS.

This is the ACS failing to authenticate to the ONU during a connection request.

Very important distinction.

üîé What ‚ÄúConnection request 401‚Äù Actually Means

TR-069 has two authentication directions:

1Ô∏è‚É£ CPE ‚Üí ACS (Inform session)

ONU authenticates to ACS
(uses ACS username/password)

2Ô∏è‚É£ ACS ‚Üí CPE (Connection Request)

ACS connects to ONU HTTP server
(uses connection-request username/password)

Your error:

Connection request error: 401

This means:

ACS tried to send a connection request to the ONU
ONU replied: 401 Unauthorized

So the credentials ACS is using to log into the ONU are wrong.

üéØ Root Cause

The mismatch is here:

On OLT:

ont tr069-server-profile modify profile-id 3
connection-request-username ""
connection-request-password ""


On ACS:

You likely configured connection request credentials

They are NOT blank

So:

ACS sends:

Authorization: Digest username="admin"


ONU expects:

username=""


Result:

401 Unauthorized


Factory reset works because:

ONU resets to default connection-request credentials

Those may match ACS defaults

üß† Why Reboot Does Not Fix It

Reboot:

Keeps stored connection-request credentials

Does not overwrite them

Factory reset:

Clears them from flash

OLT profile gets applied cleanly

üî• How To Confirm This Immediately

On OLT:

display ont tr069-server-config 0 2 1


Check:

Connection request username
Connection request password


Then check on ACS (GenieACS likely):

Look at:

Device ‚Üí ConnectionRequestUsername

Device ‚Üí ConnectionRequestPassword

They MUST match exactly.

üö® Important: Blank Credentials Are Not Safe

Setting:

connection-request-username ""
connection-request-password ""


Is usually a bad idea unless ACS is also configured blank.

Many ACS systems:

Expect non-empty credentials

Use digest auth

Fail if empty

‚úÖ Proper Fix (Choose One)
Option A ‚Äî Use Consistent Shared Credentials (Recommended)

On OLT:

ont tr069-server-profile modify profile-id 3
connection-request-username admin
connection-request-password admin123


On ACS:
Set same credentials.

Then:

ont reset 0 1


No factory reset needed.

Option B ‚Äî Use Per-Device Credentials

If you want per-device:

Do NOT use shared profile

Create profile per ONU

Or push via OMCI carefully

Keep CRM + ACS in sync

üî• Why Your Current Process Fails

Because you are:

Modifying profile

Detaching profile

Reattaching profile

Resetting ONU

But the ONU may still have old connection-request credentials stored.

Reset does not clear them fully.
Factory reset does.

So credentials mismatch remains.

üèÅ Final Answer

401 connection request error = ACS ‚Üí ONU authentication mismatch.
It is NOT an OMCI problem.
It is NOT a discovery problem.
It is NOT a reboot problem.
It is a credential mismatch problem.